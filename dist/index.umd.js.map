{"version":3,"file":"index.umd.js","sources":["../src/utils.ts","../src/constants.ts","../src/store.ts","../src/logger.ts","../src/lokalo.ts"],"sourcesContent":["import type { Style, Styles } from './types';\n\n/**\n * Creates instance of simple formatter.\n */\nexport function formatter(styles: Styles) {\n\n  const _tokens = [] as string[];\n  const _styles = [] as string[];\n\n  const api = {\n    tokens: _tokens,\n    styles: _styles,\n    add,\n    unstyled,\n    toString\n  };\n\n  /**\n   * Adds a styled value to tokens to be formatted.\n   * \n   * @param style the style to be applied.\n   * @param label the value to apply style to.\n   */\n  function add(style: Style, label: any) {\n    _tokens.push(`%c` + label)\n    _styles.push(styles[style]);\n    return api;\n  }\n\n  /**\n   * Add unstyled value.\n   * \n   * @param label the value to be unstyled.\n   */\n  function unstyled(label: any) {\n    return add('inherit', label);\n  }\n\n  /**\n   * Converts tokens and values to styled result for logging.\n   */\n  function toString() {\n    return [_tokens.join(' '), ..._styles];\n  }\n\n  return api;\n\n}\n\n/**\n * Gets a timestamp.\n * \n * @param date optional date.\n */\nexport function getTimestamp(date = Date.now()) {\n  return (new Date(date)).toISOString();\n}\n\n/**\n * Normalizes a namespace.\n * \n * @param ns the namespace to format.\n * @param parent the parent to be prefixed.\n */\nexport function formatNamespace(ns: string, parent: string) {\n  const segments = [...parent.split('.'), ns];\n  return segments.join('.');\n}\n\n/**\n * Converts an error to object literal.\n * \n * @param err the error to convert to object\n */\nexport function serializeError<E extends Error>(err: E & { [key: string]: any }) {\n  if (!(err instanceof Error))\n    return err;\n  const result = Object.getOwnPropertyNames(err).reduce((a, c) => {\n    a[c as keyof E] = err[c];\n    return a;\n  }, {} as Record<keyof E, any>);\n  if (err.name && !result.name)\n    result.name = err.name;\n  return result;\n}\n","import type { ILokaloOptions } from './types';\n\nexport const LOG_LEVELS = <const>['log', 'fatal', 'error', 'warn', 'info', 'debug'];\n\nexport const STYLES = {\n  inherit: 'color: inherit',\n  dim: 'color: #666',\n  log: 'color: lightslategray',\n  fatal: 'color: red',\n  error: 'color: firebrick',\n  warn: 'color: gold',\n  info: 'color: deepskyblue',\n  debug: 'color: magenta'\n};\n\nexport const DEFAULTS: ILokaloOptions = {\n  namespace: 'lokalo',\n  parent: '',\n  level: 'error',\n  uid: () => Date.now(),\n  type: 'local' as 'local',\n  maxLines: 3,\n  displayOutput: true,\n  styles: { ...STYLES }\n};\n\n","import { formatNamespace, formatter, getTimestamp } from './utils';\nimport type { ILokaloEvent, ILokaloStoreOptions, Style } from './types';\n\nexport class LokaloStore {\n\n  namespace: string;\n  store: Storage = localStorage;\n  queue: ILokaloEvent[] = [];\n  queueId: any;\n\n  options: Required<ILokaloStoreOptions>;\n\n  constructor(options: ILokaloStoreOptions) {\n    this.namespace = options.parent ? formatNamespace(options.namespace, options.parent) : options.namespace;\n    this.store = options.type === 'local' ? localStorage : sessionStorage;\n    this.options = options as Required<ILokaloStoreOptions>;\n  }\n\n  /**\n   * Mutes the output to console only logs.\n   */\n  mute() {\n    this.options.displayOutput = false;\n  }\n\n  /**\n  * Unmutes the output to console and displays in console.\n  */\n  unmute() {\n    this.options.displayOutput = true;\n  }\n\n  /**\n   * Gets namespaced value by key.\n   * \n   */\n  getNamespace(): ILokaloEvent[] {\n    const obj = this.store.getItem(this.namespace);\n    return obj && obj.length ? JSON.parse(obj) : [];\n  }\n\n  /**\n   * Sets a namespace's value.\n   * \n   * @param data the value to set to the namespace.\n   */\n  setNamespace(data: ILokaloEvent | ILokaloEvent[]) {\n    if (!data) return;\n    if (!Array.isArray(data))\n      data = [data];\n    const str = JSON.stringify(data);\n    this.store.setItem(this.namespace, str);\n  }\n\n  /**\n   * Removes from storage by namespace.\n   */\n  removeNamespace() {\n    this.clearQueue();\n    this.store.removeItem(this.namespace);\n  }\n\n  /**\n   * Deletes rows for the given namespace.\n   * \n   * @param count the number of rows to delete if not 1.\n   */\n  removeRows(count = 1) {\n    let rows = this.getNamespace();\n    rows = rows.sort((a, b) => {\n      if (a.timestamp > b.timestamp)\n        return 1;\n      else if (a.timestamp < b.timestamp)\n        return -1;\n      else\n        return 0;\n    }).slice(count);\n    this.setNamespace(rows);\n  }\n\n  /**\n   * Gets the number of rows for a namespace.\n   */\n  size() {\n    return this.getNamespace().length;\n  }\n\n  /**\n   * Checks the maximum lines size.\n   */\n  checkMaxLines() {\n    if (!this.options.maxLines) return;\n    const count = this.size();\n    if (count === this.options.maxLines) {\n      this.removeRows();\n    }\n    else if (count > this.options.maxLines) {\n      const adj = count - this.options.maxLines;\n      this.removeRows(adj);\n    }\n  }\n\n  /**\n   * Returns rows for the active namespace.\n   * \n   * @param limit value used to limit returned rows.\n   */\n  rows(limit = 0) {\n    let rows = this.getNamespace().reverse();\n    if (this.queue.length)\n      rows = [...this.queue, ...rows];\n    if (limit)\n      rows = rows.slice(0, limit);\n    return rows;\n  }\n\n  /**\n   * Clears the current namespace.\n   */\n  clear() {\n    return this.removeNamespace();\n  }\n\n  /**\n   * Purges lines from the logger.\n   * \n   * @param lines the number of lines to purge.\n   */\n  purge(lines = 1) {\n    return this.removeRows(lines);\n  }\n\n  queuePayload(payload: ILokaloEvent) {\n\n    this.queue.push(payload);\n    this.resetQueue();\n\n    if (!this.options.displayOutput)\n      return;\n\n    const tsKey = getTimestamp().split('T')?.pop()?.slice(0, -1).trim(); // time only.\n    const truncMessage = payload.message.slice(0, 20);\n\n    const groupLabel = formatter(this.options.styles)\n      .add(payload.level as Style, tsKey)\n      .unstyled(this.namespace)\n      .unstyled('-')\n      .add('dim', truncMessage)\n      .toString();\n\n    console.groupCollapsed(...groupLabel);\n    console.log(payload);\n    console.groupEnd();\n\n  }\n\n  /**\n   * Writes the payload to storage by namespace.\n   * \n   * @param payload the payload to be written.\n   */\n  writePayload(payload: ILokaloEvent) {\n    const rows = [...this.getNamespace(), payload];\n    this.setNamespace(rows);\n  }\n\n  /**\n  * Clears the log queue.\n  */\n  clearQueue() {\n    if (this.queueId)\n      clearInterval(this.queueId);\n    this.queue = [];\n  }\n\n  /**\n   * Resets queue timer but leaves queue payloads.\n   */\n  resetQueue() {\n    clearInterval(this.queueId);\n    this.startQueue();\n  }\n\n  /**\n   * Starts the log queue.\n   */\n  startQueue() {\n    this.queueId = setInterval(() => {\n      const payload = this.queue.shift();\n      if (payload)\n        this.writePayload(payload as ILokaloEvent);\n      if (!this.queue.length)\n        this.clearQueue();\n    }, 100);\n  }\n\n}\n","import { getTimestamp, serializeError } from './utils';\nimport { DEFAULTS } from './constants';\nimport { LOG_LEVELS } from './constants';\nimport type {\n  ILokaloEvent,\n  ILokaloOptions, LogLevel,\n  LogLevelInternal,\n  ILokaloPayload\n} from './types';\nimport { LokaloStore } from './store';\n\nexport class LokaloLogger extends LokaloStore {\n\n  options: Required<ILokaloOptions>;\n\n  constructor(options: ILokaloOptions, public parent?: LokaloLogger) {\n    super({ ...DEFAULTS as any, ...options });\n    this.options = { ...DEFAULTS as any, ...options };\n    this.checkMaxLines();\n  }\n\n  private _logger(level: LogLevel | ILokaloPayload, payload?: ILokaloPayload) {\n\n    // We don't want to log empty lines in local storage.\n    if (typeof level === 'undefined')\n      return this;\n\n    if (!payload) {\n      payload = level;\n      level = '';\n    }\n\n    level = level || 'log';\n\n    if (!this.isActiveLevel(this.level as LogLevelInternal))\n      return this;\n\n    if (typeof payload === 'string')\n      payload = { message: payload };\n\n    else if (payload instanceof Error)\n      payload = serializeError(payload);\n\n    this.checkMaxLines();\n\n    const _payload = payload as ILokaloEvent;\n    _payload.id = this.options.uid();\n    _payload.namespace = this.namespace;\n    _payload.timestamp = getTimestamp();\n    _payload.message = _payload.message || '';\n    _payload.level = level as LogLevelInternal;\n\n    // Add to the queue.\n    this.queuePayload(_payload);\n\n    return this;\n\n  }\n\n  get level() {\n    return this.options.level;\n  }\n\n  /**\n   * Checks if a level is active.\n   * \n   * @param level the level to inspect as active.\n   */\n  isActiveLevel(level: LogLevelInternal) {\n    if (level === 'log')\n      return true;\n    const curIndex = LOG_LEVELS.indexOf(level);\n    const loggerIndex = LOG_LEVELS.indexOf(this.level as LogLevelInternal);\n    return curIndex <= loggerIndex;\n  }\n\n  /**\n    * Logs a payload by default level.\n    * \n    * @param payload the payload to be logged.\n    */\n  log(payload: ILokaloPayload) { return this._logger('log', payload); }\n\n  /**\n   * Logs a payload by fatal log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  fatal(payload: ILokaloPayload) { this._logger('fatal', payload); }\n\n  /**\n   * Logs a payload by error log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  error(payload: ILokaloPayload) { this._logger('error', payload) }\n\n  /**\n   * Logs a payload by warn log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  warn(payload: ILokaloPayload) { this._logger('warn', payload); }\n\n  /**\n   * Logs a payload by info log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  info(payload: ILokaloPayload) { this._logger('info', payload); }\n\n  /**\n   * Logs a payload by debug log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  debug(payload: ILokaloPayload) { this._logger('debug', payload); }\n\n  /**\n   * Creates a child logger instance.\n   * \n   * @example\n   * import defLogger from './path/to/logger'\n   * const logger = defLogger.child('your.namespace');\n   * \n   * @param namespace the namspace of the child to create.\n   */\n  child(namespace: string) {\n    return new LokaloLogger({ ...this.options, parent: this.namespace, namespace }, this);\n  }\n\n}\n\n","import { LokaloLogger } from './logger';\n\nexport class Lokalo extends LokaloLogger {\n\n  static __instance: Lokalo;\n  loggers = new Set<LokaloLogger>();\n\n  constructor() {\n    super({ namespace: 'lokalo', parent: '' });\n    this.loggers.add(this);\n  }\n\n  static get singleton() {\n    if (!Lokalo.__instance)\n      Lokalo.__instance = new this();\n    return Lokalo.__instance;\n  }\n\n  clearAll() {\n    const loggers = [...this.loggers.values()];\n    loggers.forEach(logger => logger.clear());\n  }\n\n}\n\nexport default Lokalo.singleton;\n"],"names":[],"mappings":"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"}