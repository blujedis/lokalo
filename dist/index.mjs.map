{"version":3,"file":"index.mjs","sources":["../src/utils.ts","../src/constants.ts","../src/store.ts","../src/logger.ts","../src/lokalo.ts"],"sourcesContent":["import type { Style, Styles } from './types';\n\n/**\n * Creates instance of simple formatter.\n */\nexport function formatter(styles: Styles) {\n\n  const _tokens = [] as string[];\n  const _styles = [] as string[];\n\n  const api = {\n    tokens: _tokens,\n    styles: _styles,\n    add,\n    unstyled,\n    toString\n  };\n\n  /**\n   * Adds a styled value to tokens to be formatted.\n   * \n   * @param style the style to be applied.\n   * @param label the value to apply style to.\n   */\n  function add(style: Style, label: any) {\n    _tokens.push(`%c` + label)\n    _styles.push(styles[style]);\n    return api;\n  }\n\n  /**\n   * Add unstyled value.\n   * \n   * @param label the value to be unstyled.\n   */\n  function unstyled(label: any) {\n    return add('inherit', label);\n  }\n\n  /**\n   * Converts tokens and values to styled result for logging.\n   */\n  function toString() {\n    return [_tokens.join(' '), ..._styles];\n  }\n\n  return api;\n\n}\n\n/**\n * Gets a timestamp.\n * \n * @param date optional date.\n */\nexport function getTimestamp(date = Date.now()) {\n  return (new Date(date)).toISOString();\n}\n\n/**\n * Normalizes a namespace.\n * \n * @param ns the namespace to format.\n * @param parent the parent to be prefixed.\n */\nexport function formatNamespace(ns: string, parent: string) {\n  const segments = [...parent.split('.'), ns];\n  return segments.join('.');\n}\n\n/**\n * Converts an error to object literal.\n * \n * @param err the error to convert to object\n */\nexport function serializeError<E extends Error>(err: E & { [key: string]: any }) {\n  if (!(err instanceof Error))\n    return err;\n  const result = Object.getOwnPropertyNames(err).reduce((a, c) => {\n    a[c as keyof E] = err[c];\n    return a;\n  }, {} as Record<keyof E, any>);\n  if (err.name && !result.name)\n    result.name = err.name;\n  return result;\n}\n","import type { ILokaloOptions } from './types';\n\nexport const LOG_LEVELS = <const>['log', 'fatal', 'error', 'warn', 'info', 'debug'];\n\nexport const STYLES = {\n  inherit: 'color: inherit',\n  dim: 'color: #666',\n  log: 'color: lightslategray',\n  fatal: 'color: red',\n  error: 'color: firebrick',\n  warn: 'color: gold',\n  info: 'color: deepskyblue',\n  debug: 'color: magenta'\n};\n\nexport const DEFAULTS: ILokaloOptions = {\n  namespace: 'lokalo',\n  parent: '',\n  level: 'error',\n  uid: () => Date.now(),\n  type: 'local' as 'local',\n  maxLines: 3,\n  displayOutput: true,\n  styles: { ...STYLES }\n};\n\n","import { formatNamespace, formatter, getTimestamp } from './utils';\nimport type { ILokaloEvent, ILokaloStoreOptions, Style } from './types';\n\nexport class LokaloStore {\n\n  namespace: string;\n  store: Storage = localStorage;\n  queue: ILokaloEvent[] = [];\n  queueId: any;\n\n  options: Required<ILokaloStoreOptions>;\n\n  constructor(options: ILokaloStoreOptions) {\n    this.namespace = options.parent ? formatNamespace(options.namespace, options.parent) : options.namespace;\n    this.store = options.type === 'local' ? localStorage : sessionStorage;\n    this.options = options as Required<ILokaloStoreOptions>;\n  }\n\n  /**\n   * Mutes the output to console only logs.\n   */\n  mute() {\n    this.options.displayOutput = false;\n  }\n\n  /**\n  * Unmutes the output to console and displays in console.\n  */\n  unmute() {\n    this.options.displayOutput = true;\n  }\n\n  /**\n   * Gets namespaced value by key.\n   * \n   */\n  getNamespace(): ILokaloEvent[] {\n    const obj = this.store.getItem(this.namespace);\n    return obj && obj.length ? JSON.parse(obj) : [];\n  }\n\n  /**\n   * Sets a namespace's value.\n   * \n   * @param data the value to set to the namespace.\n   */\n  setNamespace(data: ILokaloEvent | ILokaloEvent[]) {\n    if (!data) return;\n    if (!Array.isArray(data))\n      data = [data];\n    const str = JSON.stringify(data);\n    this.store.setItem(this.namespace, str);\n  }\n\n  /**\n   * Removes from storage by namespace.\n   */\n  removeNamespace() {\n    this.clearQueue();\n    this.store.removeItem(this.namespace);\n  }\n\n  /**\n   * Deletes rows for the given namespace.\n   * \n   * @param count the number of rows to delete if not 1.\n   */\n  removeRows(count = 1) {\n    let rows = this.getNamespace();\n    rows = rows.sort((a, b) => {\n      if (a.timestamp > b.timestamp)\n        return 1;\n      else if (a.timestamp < b.timestamp)\n        return -1;\n      else\n        return 0;\n    }).slice(count);\n    this.setNamespace(rows);\n  }\n\n  /**\n   * Gets the number of rows for a namespace.\n   */\n  size() {\n    return this.getNamespace().length;\n  }\n\n  /**\n   * Checks the maximum lines size.\n   */\n  checkMaxLines() {\n    if (!this.options.maxLines) return;\n    const count = this.size();\n    if (count === this.options.maxLines) {\n      this.removeRows();\n    }\n    else if (count > this.options.maxLines) {\n      const adj = count - this.options.maxLines;\n      this.removeRows(adj);\n    }\n  }\n\n  /**\n   * Returns rows for the active namespace.\n   * \n   * @param limit value used to limit returned rows.\n   */\n  rows(limit = 0) {\n    let rows = this.getNamespace().reverse();\n    if (this.queue.length)\n      rows = [...this.queue, ...rows];\n    if (limit)\n      rows = rows.slice(0, limit);\n    return rows;\n  }\n\n  /**\n   * Clears the current namespace.\n   */\n  clear() {\n    return this.removeNamespace();\n  }\n\n  /**\n   * Purges lines from the logger.\n   * \n   * @param lines the number of lines to purge.\n   */\n  purge(lines = 1) {\n    return this.removeRows(lines);\n  }\n\n  queuePayload(payload: ILokaloEvent) {\n\n    this.queue.push(payload);\n    this.resetQueue();\n\n    if (!this.options.displayOutput)\n      return;\n\n    const tsKey = getTimestamp().split('T')?.pop()?.slice(0, -1).trim(); // time only.\n    const truncMessage = payload.message.slice(0, 20);\n\n    const groupLabel = formatter(this.options.styles)\n      .add(payload.level as Style, tsKey)\n      .unstyled(this.namespace)\n      .unstyled('-')\n      .add('dim', truncMessage)\n      .toString();\n\n    console.groupCollapsed(...groupLabel);\n    console.log(payload);\n    console.groupEnd();\n\n  }\n\n  /**\n   * Writes the payload to storage by namespace.\n   * \n   * @param payload the payload to be written.\n   */\n  writePayload(payload: ILokaloEvent) {\n    const rows = [...this.getNamespace(), payload];\n    this.setNamespace(rows);\n  }\n\n  /**\n  * Clears the log queue.\n  */\n  clearQueue() {\n    if (this.queueId)\n      clearInterval(this.queueId);\n    this.queue = [];\n  }\n\n  /**\n   * Resets queue timer but leaves queue payloads.\n   */\n  resetQueue() {\n    clearInterval(this.queueId);\n    this.startQueue();\n  }\n\n  /**\n   * Starts the log queue.\n   */\n  startQueue() {\n    this.queueId = setInterval(() => {\n      const payload = this.queue.shift();\n      if (payload)\n        this.writePayload(payload as ILokaloEvent);\n      if (!this.queue.length)\n        this.clearQueue();\n    }, 100);\n  }\n\n}\n","import { getTimestamp, serializeError } from './utils';\nimport { DEFAULTS } from './constants';\nimport { LOG_LEVELS } from './constants';\nimport type {\n  ILokaloEvent,\n  ILokaloOptions, LogLevel,\n  LogLevelInternal,\n  ILokaloPayload\n} from './types';\nimport { LokaloStore } from './store';\n\nexport class LokaloLogger extends LokaloStore {\n\n  options: Required<ILokaloOptions>;\n\n  constructor(options: ILokaloOptions, public parent?: LokaloLogger) {\n    super({ ...DEFAULTS as any, ...options });\n    this.options = { ...DEFAULTS as any, ...options };\n    this.checkMaxLines();\n  }\n\n  private _logger(level: LogLevel | ILokaloPayload, payload?: ILokaloPayload) {\n\n    // We don't want to log empty lines in local storage.\n    if (typeof level === 'undefined')\n      return this;\n\n    if (!payload) {\n      payload = level;\n      level = '';\n    }\n\n    level = level || 'log';\n\n    if (!this.isActiveLevel(this.level as LogLevelInternal))\n      return this;\n\n    if (typeof payload === 'string')\n      payload = { message: payload };\n\n    else if (payload instanceof Error)\n      payload = serializeError(payload);\n\n    this.checkMaxLines();\n\n    const _payload = payload as ILokaloEvent;\n    _payload.id = this.options.uid();\n    _payload.namespace = this.namespace;\n    _payload.timestamp = getTimestamp();\n    _payload.message = _payload.message || '';\n    _payload.level = level as LogLevelInternal;\n\n    // Add to the queue.\n    this.queuePayload(_payload);\n\n    return this;\n\n  }\n\n  get level() {\n    return this.options.level;\n  }\n\n  /**\n   * Checks if a level is active.\n   * \n   * @param level the level to inspect as active.\n   */\n  isActiveLevel(level: LogLevelInternal) {\n    if (level === 'log')\n      return true;\n    const curIndex = LOG_LEVELS.indexOf(level);\n    const loggerIndex = LOG_LEVELS.indexOf(this.level as LogLevelInternal);\n    return curIndex <= loggerIndex;\n  }\n\n  /**\n    * Logs a payload by default level.\n    * \n    * @param payload the payload to be logged.\n    */\n  log(payload: ILokaloPayload) { return this._logger('log', payload); }\n\n  /**\n   * Logs a payload by fatal log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  fatal(payload: ILokaloPayload) { this._logger('fatal', payload); }\n\n  /**\n   * Logs a payload by error log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  error(payload: ILokaloPayload) { this._logger('error', payload) }\n\n  /**\n   * Logs a payload by warn log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  warn(payload: ILokaloPayload) { this._logger('warn', payload); }\n\n  /**\n   * Logs a payload by info log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  info(payload: ILokaloPayload) { this._logger('info', payload); }\n\n  /**\n   * Logs a payload by debug log level.\n   * \n   * @param payload the payload to be logged.\n   */\n  debug(payload: ILokaloPayload) { this._logger('debug', payload); }\n\n  /**\n   * Creates a child logger instance.\n   * \n   * @example\n   * import defLogger from './path/to/logger'\n   * const logger = defLogger.child('your.namespace');\n   * \n   * @param namespace the namspace of the child to create.\n   */\n  child(namespace: string) {\n    return new LokaloLogger({ ...this.options, parent: this.namespace, namespace }, this);\n  }\n\n}\n\n","import { LokaloLogger } from './logger';\n\nexport class Lokalo extends LokaloLogger {\n\n  static __instance: Lokalo;\n  loggers = new Set<LokaloLogger>();\n\n  constructor() {\n    super({ namespace: 'lokalo', parent: '' });\n    this.loggers.add(this);\n  }\n\n  static get singleton() {\n    if (!Lokalo.__instance)\n      Lokalo.__instance = new this();\n    return Lokalo.__instance;\n  }\n\n  clearAll() {\n    const loggers = [...this.loggers.values()];\n    loggers.forEach(logger => logger.clear());\n  }\n\n}\n\nexport default Lokalo.singleton;\n"],"names":[],"mappings":"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"}